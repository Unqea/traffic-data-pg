package com.traffic.utils;

public class CoordinateExtractor {

    public static String extractCoordinates(String coordinateString) {
        // 1. 分割坐标串
        String[] coordinates = coordinateString.split(";");

        // 2. 判断组数
        int groupCount = coordinates.length;

        if (groupCount <= 5) {
            // 组数小于等于5，原样返回
            return coordinateString;
        } else {
            // 组数大于5，取第一组和最后一组，然后均匀取中间三组
            StringBuilder result = new StringBuilder();
            result.append(coordinates[0]).append(";");  // 第1组

            // 计算均匀分布的三个中间位置
            int interval = groupCount / 4;
            result.append(coordinates[interval]).append(";");            // 第一个中间点
            result.append(coordinates[interval * 2]).append(";");        // 第二个中间点
            result.append(coordinates[interval * 3]).append(";");        // 第三个中间点

            result.append(coordinates[groupCount - 1]);  // 最后一组

            return result.toString();
        }
    }


    public static void main(String[] args) {
        String coordinateString = "118.570828,29.425718;118.571084,29.425571;118.571129,29.42554;118.571364,29.42534;118.57228,29.424501;118.57267,29.424146;118.573244,29.423618;118.573546,29.423342;118.573734,29.423187;118.573859,29.423102;118.573968,29.423051;118.57421,29.422984;118.574664,29.423072;118.575258,29.423238;118.576337,29.423525;118.57684,29.423672;118.577182,29.423764;118.577341,29.423795;118.577558,29.423823;118.578005,29.423844;118.578255,29.423874;118.578894,29.423991;118.579609,29.424121;118.580269,29.424261;118.580677,29.424371;118.581032,29.424487;118.581227,29.424568;118.58144,29.424674;118.581623,29.424784;118.58192,29.425008;118.582125,29.425147;118.58223,29.425196;118.582397,29.425251;118.582612,29.425302;118.582757,29.425321;118.582916,29.425324;118.583102,29.425309;118.583246,29.425278;118.583359,29.425234;118.583495,29.425156;118.583786,29.424952;118.584009,29.424816;118.584041,29.424799;118.584153,29.424741;118.584242,29.424714;118.584337,29.424704;118.584387,29.424708;118.58446,29.424714;118.5846,29.424747;118.584828,29.424815;118.585299,29.424938;118.585743,29.425065;118.586011,29.425116;118.586416,29.425174;118.586761,29.425226;118.586876,29.42526;118.586949,29.425291;118.587035,29.425337";
        String result = extractCoordinates(coordinateString);
        System.out.println("Extracted Coordinates: " + result);
    }
}
