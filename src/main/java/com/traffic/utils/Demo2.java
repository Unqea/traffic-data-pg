package com.traffic.utils;

import cn.hutool.json.JSONArray;
import cn.hutool.json.JSONObject;
import cn.hutool.json.JSONUtil;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Demo2 {
    public static void main(String[] args) {
        //String jsonString = "{\"type\":\"LineString\",\"coordinates\":[[120.195401,30.469085],[120.196126,30.469282],[120.197795,30.469744],[120.198224,30.469862],[120.198948,30.470055],[120.199238,30.470135],[120.200326,30.47043],[120.202301,30.470967],[120.203148,30.471192],[120.225679,30.454063],[120.225781,30.453924],[120.226306,30.453506],[120.227717,30.452347],[120.273172,30.456379]],\"crs\":{\"type\":\"name\",\"properties\":{\"name\":\"EPSG:4326\"}}}";
        //String jsonString = "{\"type\":\"MultiLineString\",\"coordinates\":[[[120.214006,30.255467],[120.213477,30.254803],[120.212514,30.253595],[120.212402,30.25345],[120.211801,30.252672],[120.211742,30.252586],[120.211243,30.251959],[120.211152,30.251905],[120.210986,30.25176],[120.210031,30.250553],[120.209998,30.250505],[120.209741,30.250167],[120.20943,30.249754],[120.209553,30.249475],[120.211238,30.248376],[120.211372,30.248279],[120.21208,30.247818],[120.212402,30.247608],[120.212407,30.247603],[120.213142,30.247131],[120.213276,30.247045],[120.213861,30.246675],[120.215615,30.245511],[120.215856,30.245361],[120.218024,30.243998],[120.223243,30.240549],[120.228195,30.237571],[120.229697,30.236729],[120.232003,30.235496],[120.233983,30.234375],[120.23431,30.234187],[120.234375,30.234149],[120.235571,30.233489],[120.236032,30.233205],[120.236375,30.232996],[120.23674,30.23277],[120.236965,30.232786],[120.237297,30.23317],[120.238339,30.234375],[120.238355,30.23439],[120.239208,30.235372],[120.239326,30.235635],[120.239615,30.235485],[120.241874,30.234508],[120.241766,30.234375],[120.241225,30.233688],[120.241187,30.233645],[120.240388,30.232631],[120.239922,30.232015]],[[120.214006,30.255467],[120.214193,30.255376],[120.21466,30.255156],[120.214789,30.255124],[120.215003,30.255043],[120.217203,30.253896],[120.217605,30.253643],[120.218233,30.253316],[120.218453,30.253236],[120.218667,30.253263],[120.218903,30.253445],[120.219514,30.254116],[120.219724,30.254346],[120.220518,30.255328],[120.220583,30.255478],[120.220534,30.255601],[120.220175,30.255805]],[[120.220175,30.255805],[120.219558,30.256213],[120.219533,30.256229],[120.219365,30.256342],[120.219359,30.256347],[120.218801,30.256744],[120.217761,30.257495],[120.216806,30.258166],[120.216607,30.258208],[120.216248,30.257919],[120.215797,30.257527],[120.215121,30.256841],[120.214934,30.256621],[120.214714,30.256347],[120.214199,30.255693],[120.214006,30.255467]],[[120.145299,30.283607],[120.145239,30.283604],[120.144188,30.28355],[120.142691,30.283475],[120.141929,30.283437],[120.141436,30.283421],[120.141334,30.283346],[120.141318,30.283035],[120.141253,30.282643],[120.141189,30.282375],[120.141076,30.282086],[120.14061,30.281286],[120.140443,30.281007],[120.140352,30.280852],[120.140191,30.280557],[120.140148,30.280294],[120.140154,30.280149],[120.140218,30.279795],[120.140331,30.279242],[120.140433,30.278856],[120.140513,30.27862],[120.140669,30.27832],[120.140696,30.278282],[120.140894,30.278003],[120.141141,30.277692],[120.141355,30.277467],[120.141409,30.277413],[120.142246,30.276807],[120.142509,30.276555],[120.143222,30.27575],[120.144499,30.274151],[120.145288,30.273175],[120.145534,30.272832],[120.145577,30.272725],[120.145647,30.272419],[120.145663,30.272285],[120.145663,30.271952],[120.145781,30.271663],[120.145861,30.271678],[120.146178,30.271716],[120.146451,30.271754],[120.146484,30.271759],[120.146554,30.271767],[120.146575,30.27177],[120.146983,30.271823],[120.147111,30.271888],[120.14761,30.271931],[120.148431,30.271968],[120.148748,30.271995],[120.148898,30.272011],[120.149563,30.272065],[120.150164,30.272113],[120.150534,30.272145],[120.150866,30.272177],[120.15084,30.272306],[120.154488,30.272601],[120.154605,30.272612],[120.154686,30.272617],[120.155871,30.272719],[120.157138,30.272816],[120.157245,30.272832],[120.157792,30.272896],[120.15879,30.272982],[120.159369,30.27303],[120.159557,30.273046],[120.159632,30.273052],[120.159702,30.273057],[120.159857,30.273073],[120.160405,30.273121],[120.160726,30.273143],[120.161129,30.273181],[120.16188,30.27325],[120.162706,30.273315],[120.163275,30.273363],[120.164326,30.273454],[120.166343,30.27362],[120.166552,30.273636],[120.166729,30.273653],[120.166911,30.273663],[120.167705,30.273712],[120.167995,30.273722],[120.168451,30.273728],[120.168456,30.273728],[120.169057,30.273738],[120.169535,30.273771],[120.170216,30.273808],[120.170935,30.273867],[120.17145,30.273926],[120.173799,30.274162],[120.174277,30.2742],[120.175763,30.274334],[120.176165,30.274382],[120.176562,30.27443],[120.177699,30.274532],[120.178949,30.27464],[120.179035,30.274645],[120.179121,30.27465],[120.179271,30.274666],[120.179963,30.274736],[120.18066,30.274806],[120.180934,30.274828],[120.181208,30.274849],[120.182061,30.27493],[120.182801,30.274988],[120.183611,30.275047],[120.185687,30.275246],[120.185891,30.275267],[120.188568,30.275498],[120.189361,30.275562],[120.190429,30.275648],[120.190649,30.275659],[120.190864,30.275664],[120.191041,30.275675],[120.191218,30.275691],[120.192011,30.275745],[120.192811,30.275798],[120.193203,30.275852],[120.193589,30.275916],[120.194329,30.27597],[120.195032,30.276018],[120.196561,30.276126],[120.197709,30.276249],[120.198605,30.276324],[120.199436,30.276399],[120.200332,30.276469],[120.200922,30.276517],[120.20199,30.276614],[120.202461,30.276657],[120.203288,30.276732],[120.20347,30.276705],[120.203647,30.276721],[120.205348,30.276903],[120.206206,30.276995],[120.207134,30.277097],[120.207188,30.277107],[120.207246,30.276485],[120.207257,30.276147],[120.207257,30.276072],[120.207268,30.275841],[120.207268,30.275793],[120.207268,30.275396],[120.2073,30.27391],[120.20723,30.273894],[120.207343,30.272033],[120.207365,30.271507],[120.207368,30.271376],[120.207391,30.270471],[120.207456,30.270461],[120.207504,30.268953],[120.207515,30.268712],[120.20752,30.268449],[120.20759,30.26735],[120.20759,30.267333],[120.207627,30.265821],[120.207649,30.2653],[120.20767,30.264807],[120.207713,30.263766],[120.207724,30.263621],[120.20781,30.262436],[120.20789,30.26095],[120.207928,30.260022],[120.207965,30.259324],[120.207987,30.258986],[120.208003,30.258783],[120.208056,30.257656],[120.208169,30.257431],[120.210175,30.257066],[120.211211,30.256803],[120.211554,30.256685],[120.211592,30.256669],[120.212321,30.256347],[120.212402,30.256304],[120.212616,30.256197],[120.213534,30.255703],[120.214006,30.255467]]],\"crs\":null}";
        String jsonString = "{\"type\":\"LineString\",\"coordinates\":[[120.195401,30.469085],[120.196126,30.469282],[120.197795,30.469744],[120.198224,30.469862],[120.198948,30.470055],[120.199238,30.470135],[120.200326,30.47043],[120.202301,30.470967],[120.203148,30.471192],[120.205267,30.471777],[120.206029,30.472034],[120.206361,30.472179],[120.206361,30.472179],[120.206807,30.471514],[120.20722,30.470865],[120.207617,30.470055],[120.207976,30.469443],[120.208507,30.468633],[120.209489,30.467271],[120.210685,30.465667],[120.21113,30.465087],[120.211452,30.464669],[120.211554,30.46454],[120.212123,30.463773],[120.212402,30.463414],[120.213056,30.462571],[120.213394,30.462137],[120.213732,30.461697],[120.213732,30.461697],[120.213791,30.461515],[120.213995,30.461278],[120.214156,30.461107],[120.214687,30.460613],[120.215111,30.460243],[120.215476,30.459959],[120.215824,30.459701],[120.216189,30.45946],[120.216688,30.459149],[120.217503,30.458698],[120.217766,30.458591],[120.218008,30.458521],[120.218437,30.458296],[120.218871,30.458071],[120.219788,30.457593],[120.22132,30.456772],[120.22132,30.456772],[120.222723,30.456021],[120.223495,30.455592],[120.224616,30.454873],[120.225314,30.454364],[120.225636,30.454101],[120.225679,30.454063],[120.225679,30.454063],[120.225781,30.453924],[120.226306,30.453506],[120.227717,30.452347],[120.228972,30.451349],[120.229166,30.451113],[120.229831,30.450566],[120.230753,30.449906],[120.230957,30.44975],[120.231263,30.449525],[120.231569,30.4493],[120.231569,30.4493],[120.232883,30.448243],[120.234197,30.447186],[120.234235,30.447149],[120.234375,30.447041],[120.234562,30.446891],[120.236917,30.445014],[120.237218,30.444772],[120.237684,30.444735],[120.23807,30.444783],[120.240345,30.445008],[120.243204,30.445293],[120.244642,30.445459],[120.244899,30.445502],[120.246873,30.446086],[120.248182,30.446467],[120.249384,30.446827],[120.24947,30.446859],[120.252758,30.44783],[120.253949,30.448189],[120.254491,30.448409],[120.255623,30.448919],[120.256347,30.449241],[120.256696,30.449396],[120.257747,30.449879],[120.258037,30.449981],[120.261888,30.451268],[120.263589,30.451826],[120.265113,30.452336],[120.265171,30.452358],[120.266759,30.452873],[120.267843,30.453216],[120.269098,30.45365],[120.270461,30.454101],[120.271689,30.454509],[120.272832,30.454863],[120.273545,30.455115],[120.273701,30.455303],[120.273172,30.456379]],\"crs\":{\"type\":\"name\",\"properties\":{\"name\":\"EPSG:4326\"}}}";
        String s = changeStr(jsonString);
        System.out.println(s);
    }




    public static String changeStr(String jsonString){
        JSONObject entries = JSONUtil.parseObj(jsonString);
        String type = (String) entries.get("type");
        JSONArray coordinates = (JSONArray) entries.get("coordinates");
        if (type.equals("LineString")){
            String s = JSONUtil.toJsonStr(coordinates);
            return "[" + s + "]";

        }else if (type.equals("MultiLineString")){
            return JSONUtil.toJsonStr(coordinates);
        }
        return "";
    }

    public static String sortCoordinates(String coordinatesString){
        String[] coordinatesArray = coordinatesString.split(";");
        //原始坐标串集合
        List<String> list = Arrays.asList(coordinatesArray);
        //排序后的坐标串集合
        List<String> resultList = new ArrayList<>();

        //从中拿去第一个坐标串
        String coordinate = list.get(0);
        list.remove(0);
        resultList.add(coordinate);

        String[] parts = coordinate.split(",");
        double x = Double.parseDouble(parts[0]);
        double y = Double.parseDouble(parts[1]);




        return null;



    }
}
